!function(r, e) {
  "object" == typeof exports && "undefined" != typeof module ? e(exports, require("indent-string"), require("clean-stack"), require("util"), require("check-iterable"), require("array-hyper-unique"), require("err-errors"), require("err-stack-reduce"), require("err-stack-meta"), require("error-stack2")) : "function" == typeof define && define.amd ? define([ "exports", "indent-string", "clean-stack", "util", "check-iterable", "array-hyper-unique", "err-errors", "err-stack-reduce", "err-stack-meta", "error-stack2" ], e) : e((r = "undefined" != typeof globalThis ? globalThis : r || self).ErrIndent = {}, r.indentString, r._cleanStack, r.util, r.checkIterable, r.arrayHyperUnique, r.errErrors, r.errStackReduce, r.errStackMeta, r.errorStack2);
}(this, (function(r, e, t, n, s, i, o, u, a, l) {
  "use strict";
  function _isAllowedIterable(r) {
    return "string" != typeof r && !(r instanceof String) && s.isIterable(r);
  }
  function errorsToMessageList(r, e, s) {
    var o, l, c;
    if (!r || !_isAllowedIterable(r)) throw new TypeError(`Invalid input errors: ${r}`);
    null !== (o = e) && void 0 !== o || (e = {});
    const {handleStack: d = (r => t(r))} = e;
    let g;
    null !== (l = s) && void 0 !== l || (s = e.error);
    let b = [];
    const f = u.errStackReduceCore(s, e.stackReduceOptions);
    return r.forEach((r => {
      null != r && (s === r ? g = String(r) : b.push("string" == typeof r.stack ? d(a.stringifyStackMeta(f(r)), r) : n.inspect(r)));
    })), b = b.filter((r => null == r ? void 0 : r.length)), null !== (c = g) && void 0 !== c && c.length && b.unshift(g), 
    i.array_unique_overwrite(b);
  }
  function indentSubErrorMessage(r, t) {
    var n, s;
    return _isAllowedIterable(r) && (r = [ ...r ].join("\n")), null !== (n = t) && void 0 !== n || (t = {}), 
    e(r, null !== (s = t.indent) && void 0 !== s ? s : 4, t.indentOptions);
  }
  function indentSubErrors(r, e, t) {
    return indentSubErrorMessage(errorsToMessageList(r, e, t), e);
  }
  function messageWithSubErrors(r, e, t) {
    var n;
    null !== (n = e) && void 0 !== n || (e = o.getSubErrors(r));
    let s = l.parseStack(r.stack, r.message), i = [];
    void 0 !== s.message && i.push(s.message);
    let u = indentSubErrors(e, t, r);
    if (u.length && (0 === i.length && i.push(""), i.push(u)), i.length) return i.join("\n");
  }
  r._isAllowedIterable = _isAllowedIterable, r.default = messageWithSubErrors, r.errorsToMessageList = errorsToMessageList, 
  r.indentSubErrorMessage = indentSubErrorMessage, r.indentSubErrors = indentSubErrors, 
  r.indentSubErrorsFromError = function indentSubErrorsFromError(r, e) {
    return indentSubErrors(o.getSubErrors(r), e, r);
  }, r.messageWithSubErrors = messageWithSubErrors, Object.defineProperty(r, "__esModule", {
    value: !0
  });
}));
//# sourceMappingURL=index.umd.production.min.cjs.map
