{"version":3,"file":"index.cjs.development.cjs","sources":["../src/index.ts","../src/index.cts"],"sourcesContent":["import { errStackMeta } from 'err-stack-meta';\n\nexport interface IOptions\n{\n\t/**\n\t * @default 1\n\t */\n\tstart?: number;\n\t/**\n\t * @default 5\n\t */\n\tend?: number;\n}\n\n/**\n * reduce stame stack from sub error with parent error\n *\n * @example\n * const stackReduce = errStackReduceCore(mainError, options.stackReduceOptions);\n *\n * console.dir(stackReduce(error));\n */\nexport function errStackReduceCore(mainError: Error, mainOptions?: IOptions)\n{\n\tconst stack = errStackMeta(mainError).stack;\n\tconst { start = 1, end = 5 } = mainOptions ?? {};\n\n\treturn (error: Error, options?: IOptions) =>\n\t{\n\t\tlet _meta = errStackMeta(error);\n\t\tlet _stack = _meta.stack.split('\\n');\n\n\t\tlet _start = options?.start ?? start;\n\t\tlet _end = options?.end ?? end;\n\n\t\tlet i: number = _start;\n\n\t\tdo\n\t\t{\n\t\t\tif (_stack[i]?.length && stack.includes(_stack[i].trim()))\n\t\t\t{\n\t\t\t\t_stack = _stack.slice(0, i)\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\twhile (i++ < _end || i >= _stack.length);\n\n\t\treturn {\n\t\t\t..._meta,\n\t\t\tstack: _stack.join('\\n'),\n\t\t\toriginalStack: _meta.stack,\n\t\t}\n\t}\n}\n\n/**\n * reduce stame stack from sub error with parent error\n *\n * recommend use {@link errStackReduceCore}\n */\nexport function errStackReduce(error: Error, mainError: Error, mainOptions?: IOptions)\n{\n\treturn errStackReduceCore(mainError, mainOptions)(error)\n}\n\nexport default errStackReduceCore\n\n// @ts-ignore\nif (process.env.TSDX_FORMAT !== 'esm')\n{\n\tObject.defineProperty(errStackReduceCore, \"__esModule\", { value: true });\n\n\tObject.defineProperty(errStackReduceCore, 'errStackReduceCore', { value: errStackReduceCore });\n\tObject.defineProperty(errStackReduceCore, 'default', { value: errStackReduceCore });\n\n\tObject.defineProperty(errStackReduceCore, 'errStackReduce', { value: errStackReduce });\n}\n","import _ from './index';\n\n// @ts-ignore\nexport = _\n"],"names":["errStackReduceCore","mainError","mainOptions","stack","errStackMeta","start","end","error","options","_options$start","_options$end","_meta","_stack","split","_start","_end","i","_stack$i","length","includes","trim","slice","join","originalStack","errStackReduce","Object","defineProperty","value","module","exports","_"],"mappings":"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"}