{"version":3,"file":"index.cjs.production.min.cjs","sources":["../src/index.ts","../src/index.cts"],"sourcesContent":["import { errStackMeta } from 'err-stack-meta';\n\nexport interface IOptions\n{\n\t/**\n\t * @default 1\n\t */\n\tstart?: number;\n\t/**\n\t * @default 5\n\t */\n\tend?: number;\n}\n\n/**\n * reduce stame stack from sub error with parent error\n *\n * @example\n * const stackReduce = errStackReduceCore(mainError, options.stackReduceOptions);\n *\n * console.dir(stackReduce(error));\n */\nexport function errStackReduceCore(mainError: Error, mainOptions?: IOptions)\n{\n\tconst stack = errStackMeta(mainError).stack;\n\tconst { start = 1, end = 5 } = mainOptions ?? {};\n\n\treturn (error: Error, options?: IOptions) =>\n\t{\n\t\tlet _meta = errStackMeta(error);\n\t\tlet _stack = _meta.stack.split('\\n');\n\n\t\tlet _start = options?.start ?? start;\n\t\tlet _end = options?.end ?? end;\n\n\t\tlet i: number = _start;\n\n\t\tdo\n\t\t{\n\t\t\tif (_stack[i]?.length && stack.includes(_stack[i].trim()))\n\t\t\t{\n\t\t\t\t_stack = _stack.slice(0, i)\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\twhile (i++ < _end || i >= _stack.length);\n\n\t\treturn {\n\t\t\t..._meta,\n\t\t\tstack: _stack.join('\\n'),\n\t\t\toriginalStack: _meta.stack,\n\t\t}\n\t}\n}\n\n/**\n * reduce stame stack from sub error with parent error\n *\n * recommend use {@link errStackReduceCore}\n */\nexport function errStackReduce(error: Error, mainError: Error, mainOptions?: IOptions)\n{\n\treturn errStackReduceCore(mainError, mainOptions)(error)\n}\n\nexport default errStackReduceCore\n\n// @ts-ignore\nif (process.env.TSDX_FORMAT !== 'esm')\n{\n\tObject.defineProperty(errStackReduceCore, \"__esModule\", { value: true });\n\n\tObject.defineProperty(errStackReduceCore, 'errStackReduceCore', { value: errStackReduceCore });\n\tObject.defineProperty(errStackReduceCore, 'default', { value: errStackReduceCore });\n\n\tObject.defineProperty(errStackReduceCore, 'errStackReduce', { value: errStackReduce });\n}\n","import _ from './index';\n\n// @ts-ignore\nexport = _\n"],"names":["errStackReduceCore","mainError","mainOptions","stack","errStackMeta","start","end","error","options","_options$start","_options$end","_meta","_stack","split","_start","_end","i","_stack$i","length","includes","trim","slice","join","originalStack","Object","defineProperty","value","errStackReduce","module","exports","_"],"mappings":";;;;AAsBgB,SAAAA,mBAAmBC,GAAkBC;EAEpD,MAAMC,IAAQC,EAAAA,aAAaH,GAAWE,QAChCE,OAAEA,IAAQ,GAACC,KAAEA,IAAM,KAAMJ,YAAAA,IAAe;EAE9C,OAAO,CAACK,GAAcC;IAAsB,IAAAC,GAAAC;IAE3C,IAAIC,IAAQP,eAAaG,IACrBK,IAASD,EAAMR,MAAMU,MAAM,OAE3BC,IAAuBL,UAAjBA,IAAGD,iBAAO,IAAPA,EAASH,eAAKI,MAAAA,IAAAA,IAAIJ,GAC3BU,IAAmBL,UAAfA,IAAGF,iBAAO,IAAPA,EAASF,aAAGI,MAAAA,IAAAA,IAAIJ,GAEvBU,IAAYF;IAEhB,GACA;MAAA,IAAAG;MACC,IAAaA,UAATA,IAAAL,EAAOI,YAAPC,MAASA,KAATA,EAAWC,UAAUf,EAAMgB,SAASP,EAAOI,GAAGI,SAClD;QACCR,IAASA,EAAOS,MAAM,GAAGL;QACzB;AACD;AACA,aACMA,MAAMD,KAAQC,KAAKJ,EAAOM;IAEjC,OAAO;SACHP;MACHR,OAAOS,EAAOU,KAAK;MACnBC,eAAeZ,EAAMR;;AACrB;AAEH;;AAiBCqB,OAAOC,eAAezB,oBAAoB,cAAc;EAAE0B,QAAO;IAEjEF,OAAOC,eAAezB,oBAAoB,sBAAsB;EAAE0B,OAAO1B;IACzEwB,OAAOC,eAAezB,oBAAoB,WAAW;EAAE0B,OAAO1B;IAE9DwB,OAAOC,eAAezB,oBAAoB,kBAAkB;EAAE0B,gBAf/CC,eAAepB,GAAcN,GAAkBC;IAE9D,OAAOF,mBAAmBC,GAAWC,EAA9BF,CAA2CO;AACnD;IC7DAqB,OAAAC,UACSC"}