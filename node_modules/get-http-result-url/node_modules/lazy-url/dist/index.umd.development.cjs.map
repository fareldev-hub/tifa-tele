{"version":3,"file":"index.umd.development.cjs","sources":["../src/index.ts"],"sourcesContent":["/**\n * Created by user on 2019/6/6.\n */\n\nimport urlParse, { StringifyQuery, URLPart } from 'url-parse';\nimport SymbolInspect from 'symbol.inspect';\nimport { inspect } from 'util';\nimport { typePredicates } from 'ts-type-predicates';\nimport errcode from 'err-code';\nimport { _fixReplaceURLProtocol } from 'replace-url-protocol';\nimport { errorsToMessageList, messageWithSubErrors } from 'err-indent';\nimport { errStackMeta, stringifyStackMeta } from 'err-stack-meta';\n\nexport type IURLLike = string | URL | IURLObjectLike;\nexport const SYM_URL = Symbol('url');\nexport const SYM_HIDDEN = Symbol('hidden');\n\nexport const enum ENUM_FAKE\n{\n\tprotocol = 'fake+http:',\n\thostname = 'url-fake-hostname',\n}\n\nconst SymbolContext = findSymbolContext();\n\nexport class LazyURL extends URL implements URL\n{\n\t/**\n\t * @deprecated\n\t */\n\tprotected [SYM_URL]?: URL;\n\tprotected [SYM_HIDDEN]: Partial<URL>;\n\n\tstatic create(url: IURLLike | [IURLLike, IURLLike?], base?: IURLLike)\n\t{\n\t\treturn new this(url, base)\n\t}\n\n\tconstructor(url: IURLLike | [IURLLike, IURLLike?], base?: IURLLike)\n\t{\n\t\tlet u = _core(url, base)\n\n\t\tsuper(u.url.href);\n\n\t\t//this[SYM_URL] = _url;\n\t\tthis[SYM_HIDDEN] = u.hidden;\n\n\t\t//_numerable(this)\n\t}\n\n\t/*\n\t[SymbolInspect]()\n\t{\n\t\treturn `LazyURL {\n  href: '${this.href}',\n  href: '${this.toRealString()}',\n  origin: '${this.origin}',\n  protocol: '${this.protocol}',\n  username: '${this.username}',\n  password: '${this.password}',\n  host: '${this.host}',\n  hostname: '${this.hostname}',\n  port: '${this.port}',\n  pathname: '${this.pathname}',\n  search: '${this.search}',\n  searchParams: ${util.inspect(this.searchParams)},\n  hash: '${this.hash}'\n}`;\n\t}\n\t */\n\n\t/*\n\t[SymbolInspect]()\n\t{\n\t\treturn `LazyURL(${this.href})`;\n\t}\n\n\t */\n\n\tget paths(): string[]\n\t{\n\t\tif (SymbolContext != null && this[SymbolContext] && Array.isArray(this[SymbolContext].path))\n\t\t{\n\t\t\treturn this[SymbolContext].path.slice();\n\t\t}\n\n\t\treturn this.pathname\n\t\t\t.split('/')\n\t\t\t.filter(v => v !== '')\n\t}\n\n\tfakeExists()\n\t{\n\t\treturn this.fakeKeys().length\n\t}\n\n\tfakeKeys()\n\t{\n\t\treturn Object.keys(this[SYM_HIDDEN])\n\t}\n\n\tfakeEntries()\n\t{\n\t\treturn Object.entries(this[SYM_HIDDEN])\n\t}\n\n\t/**\n\t * get the real url (remove fake value)\n\t * throw error if not a valid url\n\t *\n\t * @returns {string}\n\t */\n\ttoRealString(options?: {\n\t\tignoreInvalid?: boolean,\n\t\tstringify?: StringifyQuery,\n\t})\n\t{\n\t\tlet ks = this.fakeEntries();\n\n\t\tif (ks.length)\n\t\t{\n\t\t\tlet u = urlParse(this.href);\n\n\t\t\tks\n\t\t\t\t.forEach(([name, value]) =>\n\t\t\t\t{\n\t\t\t\t\tif (u[name] === value)\n\t\t\t\t\t{\n\t\t\t\t\t\tu.set(name as any, '');\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t;\n\n\t\t\tif (u.host === '')\n\t\t\t{\n\t\t\t\tif (options?.ignoreInvalid)\n\t\t\t\t{\n\t\t\t\t\tu.set('username', '');\n\t\t\t\t\tu.set('password', '');\n\t\t\t\t\tu.set('port', '');\n\t\t\t\t\tu.set('protocol', '');\n\t\t\t\t}\n\t\t\t\telse if (u.username !== '' || u.password !== '' || u.port !== '' || u.protocol !== '')\n\t\t\t\t{\n\t\t\t\t\t//throw new TypeError(`Invalid URL ${u}`)\n\n\t\t\t\t\tthrow _wrapError(new TypeError(`Invalid URL`), u)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet s = u.toString(options?.stringify);\n\n\t\t\tif (u.protocol === '' && u.host === '')\n\t\t\t{\n\t\t\t\ts = s.replace(/^\\/\\//, '');\n\t\t\t}\n\n\t\t\treturn s\n\t\t}\n\n\t\treturn this.href;\n\t}\n\n\toverride toString()\n\t{\n\t\treturn this.href;\n\t}\n\n\t/*\n\ttoJSON()\n\t{\n\t\treturn this[SYM_URL].toJSON();\n\t}\n\t */\n\n\t/*\n\tget hash()\n\t{\n\t\treturn this[SYM_URL].hash\n\t}\n\n\tset hash(value)\n\t{\n\t\tthis[SYM_URL].hash = value\n\t}\n\n\tget host()\n\t{\n\t\treturn this[SYM_URL].host\n\t}\n\n\tset host(value)\n\t{\n\t\tdelete this[SYM_HIDDEN].hostname;\n\n\t\tthis[SYM_URL].host = value\n\t}\n\t */\n\n\toverride get hostname()\n\t{\n\t\treturn super.hostname\n\t}\n\n\toverride set hostname(value)\n\t{\n\t\tif (!isFakeHostname(value))\n\t\t{\n\t\t\tdelete this[SYM_HIDDEN].hostname;\n\t\t}\n\n\t\tsuper.hostname = value\n\t}\n\n\toverride get href()\n\t{\n\t\treturn super.href\n\t}\n\n\toverride set href(value: string)\n\t{\n\t\tsuper.href = value\n\n\t\tif (isFakeProtocol(super.protocol))\n\t\t{\n\t\t\tthis[SYM_HIDDEN].protocol = ENUM_FAKE.protocol\n\t\t}\n\n\t\tif (isFakeHostname(super.hostname))\n\t\t{\n\t\t\tthis[SYM_HIDDEN].hostname = ENUM_FAKE.hostname\n\t\t}\n\t}\n\n\toverride get origin(): string\n\t{\n\t\tlet origin = super.origin;\n\n\t\tif ((typeof origin === 'undefined' || origin === null || origin === 'null' || origin === 'undefined') && super.protocol.length)\n\t\t{\n\t\t\t/**\n\t\t\t * @see https://github.com/nodejs/node/issues/39732#issuecomment-896624653\n\t\t\t */\n\t\t\torigin = super.protocol + '//' + super.hostname;\n\t\t}\n\n\t\treturn origin\n\t}\n\n\t/*\n\n\tget password()\n\t{\n\t\treturn this[SYM_URL].password\n\t}\n\n\tset password(value)\n\t{\n\t\tthis[SYM_URL].password = value\n\t}\n\n\tget pathname()\n\t{\n\t\treturn this[SYM_URL].pathname\n\t}\n\n\tset pathname(value)\n\t{\n\t\tthis[SYM_URL].pathname = value\n\t}\n\n\t */\n\n\toverride get port(): string\n\t{\n\t\treturn super.port\n\t}\n\n\toverride set port(value: string | number)\n\t{\n\t\tif (typeof value === 'string' && value !== '')\n\t\t{\n\t\t\tlet old = value.toString().trim();\n\n\t\t\tvalue = parseInt(value)\n\n\t\t\tif (old !== value.toString())\n\t\t\t{\n\t\t\t\tthrow new TypeError(`Invalid port input: { '${old}' => ${value} }`)\n\t\t\t}\n\t\t}\n\n\t\tif (typeof value === 'number')\n\t\t{\n\t\t\tif (Number.isNaN(value) || !Number.isFinite(value) || value < 0 || value > 65535)\n\t\t\t{\n\t\t\t\tthrow new RangeError(`Invalid port range: ${value}`)\n\t\t\t}\n\n\t\t\tvalue = value.toString();\n\t\t}\n\n\t\tsuper.port = value ?? ''\n\t}\n\n\toverride get protocol()\n\t{\n\t\treturn super.protocol\n\t}\n\n\toverride set protocol(value)\n\t{\n\t\tif (typeof value !== 'string' || value.length < 2 || !value.endsWith(':'))\n\t\t{\n\t\t\tthrow new TypeError(`Invalid protocol input: ${value}`)\n\t\t}\n\n\t\tif (!isFakeProtocol(value))\n\t\t{\n\t\t\tdelete this[SYM_HIDDEN].protocol;\n\t\t}\n\n\t\tconst old = super.protocol;\n\n\t\tif (old !== value)\n\t\t{\n\t\t\tsuper.protocol = value;\n\n\t\t\t/**\n\t\t\t * avoid bug of https://github.com/nodejs/node/issues/39732\n\t\t\t */\n\t\t\t_fixReplaceURLProtocol(this, old, value);\n\t\t}\n\t}\n\n\tget auth(): string\n\t{\n\t\tif (this.username?.length)\n\t\t{\n\t\t\treturn `${this.username}:${this.password ?? ''}`\n\t\t}\n\n\t\treturn ''\n\t}\n\n\tset auth(value: string)\n\t{\n\t\tthis.username = '';\n\t\tthis.password = '';\n\n\t\tlet ls = value?.split(':')\n\n\t\tif (ls?.length)\n\t\t{\n\t\t\tthis.username = ls.shift();\n\t\t\tthis.password = ls.join(':');\n\t\t}\n\t}\n\n\t/*\n\tget search()\n\t{\n\t\treturn this[SYM_URL].search\n\t}\n\n\tset search(value)\n\t{\n\t\tthis[SYM_URL].search = value\n\t}\n\n\tget searchParams()\n\t{\n\t\treturn this[SYM_URL].searchParams\n\t}\n\n\tget username()\n\t{\n\t\treturn this[SYM_URL].username\n\t}\n\n\tset username(value)\n\t{\n\t\tthis[SYM_URL].username = value\n\t}\n\n\t */\n\n\t/**\n\t * @alias protocol\n\t */\n\tget scheme()\n\t{\n\t\treturn this.protocol\n\t}\n\n\t/**\n\t * @alias protocol\n\t */\n\tset scheme(value: string)\n\t{\n\t\tthis.protocol = value;\n\t}\n\n\t/**\n\t * @alias hash\n\t */\n\tget fragment()\n\t{\n\t\treturn this.hash\n\t}\n\n\t/**\n\t * @alias hash\n\t */\n\tset fragment(value: string)\n\t{\n\t\tthis.hash = value;\n\t}\n\n\t/**\n\t * @alias search\n\t */\n\tget query()\n\t{\n\t\treturn this.search\n\t}\n\n\t/**\n\t * @alias search\n\t */\n\tset query(value: string)\n\t{\n\t\tthis.search = value;\n\t}\n\n\ttoObject(): IURLObject\n\t{\n\t\treturn LazyURL.toObject(this)\n\t}\n\n\t/**\n\t * clone into a object\n\t *\n\t * @returns {IURLObject}\n\t */\n\tstatic toObject(url: URL): IURLObject\n\t{\n\t\treturn LazyURL.keys().reduce((a, b) =>\n\t\t{\n\t\t\tif (b === 'searchParams')\n\t\t\t{\n\t\t\t\ta[b] = new URLSearchParams(url.searchParams.entries() as any as [string, string][])\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ta[b] = url[b];\n\t\t\t}\n\n\t\t\treturn a\n\t\t}, {} as IURLObject)\n\t}\n\n\tkeys(): IUrlKeys[]\n\t{\n\t\treturn LazyURL.keys()\n\t}\n\n\tvalues()\n\t{\n\t\treturn LazyURL.values(this)\n\t}\n\n\tentries(): IEntries\n\t{\n\t\treturn LazyURL.entries(this)\n\t}\n\n\tstatic keys(): IUrlKeys[]\n\t{\n\t\treturn [\n\t\t\t'href',\n\t\t\t'protocol',\n\t\t\t'username',\n\t\t\t'password',\n\t\t\t'host',\n\t\t\t'hostname',\n\t\t\t'port',\n\t\t\t'pathname',\n\t\t\t'search',\n\t\t\t'searchParams',\n\t\t\t'hash',\n\t\t]\n\t}\n\n\tstatic values(url: URL)\n\t{\n\t\treturn LazyURL.keys().map(name => url[name])\n\t}\n\n\tstatic entries(url: URL): IEntries\n\t{\n\t\treturn LazyURL.keys().map(name => [name, url[name]]) as IEntries\n\t}\n\n\tcreateURLSearchParams(init?: string[][] | Record<string, string> | string | URLSearchParams | URL)\n\t{\n\t\tif (init instanceof URL)\n\t\t{\n\t\t\tinit = init.searchParams;\n\t\t}\n\n\t\treturn new URLSearchParams(init)\n\t}\n\n\tset<K extends Extract<URLPart, keyof LazyURL>>(part: K, value: LazyURL[K])\n\t{\n\t\tthis[part] = value\n\t}\n\n\tget<K extends Extract<URLPart, keyof LazyURL>>(part: K): LazyURL[K]\n\t{\n\t\treturn this[part]\n\t}\n\n}\n\nexport type IEntries = ([\"hash\" | \"host\" | \"hostname\" | \"href\" | \"password\" | \"pathname\" | \"port\" | \"protocol\" | \"search\" | \"username\", string] | [\"searchParams\", URLSearchParams])[]\n\nexport type IEntriesRow<T extends IUrlKeys> = [T, URL[T]]\n\nfunction _numerable(lib)\n{\n\tlet ds = Object.getOwnPropertyDescriptors(lib);\n\n\t([\n\t\t'href',\n\t\t'protocol',\n\t\t'username',\n\t\t'password',\n\t\t'host',\n\t\t'hostname',\n\t\t'port',\n\t\t'pathname',\n\t\t'search',\n\t\t'searchParams',\n\t\t'hash',\n\t] as const)\n\t\t.forEach((name) =>\n\t\t{\n\t\t\tif (name in ds)\n\t\t\t{\n\t\t\t\tds[name].enumerable = true;\n\n\t\t\t\tObject.defineProperty(lib, name, ds[name])\n\t\t\t}\n\t\t})\n\t;\n}\n\nexport type IUrlKeys =\n\t| 'href'\n\t| 'username'\n\t| 'password'\n\t| 'host'\n\t| 'hostname'\n\t| 'port'\n\t| 'pathname'\n\t| 'search'\n\t| 'searchParams'\n\t| 'protocol'\n\t| 'hash'\n\t;\n\nexport function findSymbolContext(): symbol\n{\n\tlet u = _newURL(`https://localhost`);\n\n\tconst SymbolContext = Object.getOwnPropertySymbols(u)\n\t\t.filter(sym => u[sym].host == 'localhost')[0]\n\t;\n\n\treturn SymbolContext;\n}\n\nexport interface IURLObjectLike\n{\n\thref: string;\n}\n\nexport interface IURLObject\n{\n\thref: string;\n\tprotocol: string;\n\tusername: string;\n\tpassword: string;\n\thost: string;\n\thostname: string;\n\tport: string;\n\tpathname: string;\n\tsearch: string;\n\tsearchParams: URLSearchParams;\n\thash: string;\n}\n\n/**\n * @private\n */\nexport function _core(url: IURLLike | [IURLLike, IURLLike?], base?: IURLLike)\n{\n\tif (Array.isArray(url))\n\t{\n\t\tif (base == null)\n\t\t{\n\t\t\t[url, base] = url;\n\t\t}\n\t}\n\n\tif (typeof url !== 'undefined' && url !== null)\n\t{\n\t\tif (url instanceof LazyURL)\n\t\t{\n\t\t\turl = url.toRealString();\n\t\t}\n\t\telse if (url instanceof URL)\n\t\t{\n\t\t\turl = url.href;\n\t\t}\n\t\telse if (typeof (url as IURLObjectLike).href === 'string')\n\t\t{\n\t\t\turl = (url as IURLObjectLike).href;\n\t\t\tbase ??= (url as any as HTMLLinkElement).baseURI;\n\t\t}\n\t}\n\n\tif (typeof url !== 'string')\n\t{\n\t\tthrow _wrapError(new TypeError(`Argument '${inspect(url)}' is not assignable to url like.`), url, base)\n\t}\n\n\tlet _url: URL;\n\tconst _hidden_: Partial<URL> = {};\n\n\tif (typeof base !== 'string' && base != null && typeof base.href === 'string')\n\t{\n\t\tbase = base.href;\n\t}\n\n\tif (base === '')\n\t{\n\t\tbase = void 0;\n\t}\n\n\ttry\n\t{\n\t\t_url = _newURL(url, base as string)\n\t}\n\tcatch (e: unknown)\n\t{\n\t\tlet ok: boolean;\n\n\t\ttypePredicates<IURLError>(e);\n\n\t\tif (e.code === 'ERR_INVALID_URL' || /Invalid URL/.test(e.message))\n\t\t{\n\t\t\tif (typeof base === 'string')\n\t\t\t{\n\t\t\t\tlet old = base;\n\t\t\t\tlet u = urlParse(base)/* as URL & {\n\t\t\t\t\t\tset(name: keyof URL, value: string): void\n\t\t\t\t\t}*/;\n\n\t\t\t\tif ((\n\t\t\t\t\tu.host === ''\n\t\t\t\t\t|| u.protocol === ''\n\t\t\t\t))\n\t\t\t\t{\n\t\t\t\t\tif (!old.includes('/') && [\n\t\t\t\t\t\tu.protocol + u.host,\n\t\t\t\t\t\tu.protocol + u.pathname,\n\t\t\t\t\t].includes(old.toLowerCase()))\n\t\t\t\t\t{\n\t\t\t\t\t\tu = urlParse('');\n\n\t\t\t\t\t\tu.set('host', old);\n\t\t\t\t\t\tu.set('protocol', ENUM_FAKE.protocol);\n\t\t\t\t\t\tu.set('pathname', '');\n\n\t\t\t\t\t\t_hidden_.protocol = ENUM_FAKE.protocol;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (u.host === '')\n\t\t\t\t\t{\n\t\t\t\t\t\tif (u.pathname != '' && !u.pathname.includes('/'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tu.set('host', u.pathname);\n\t\t\t\t\t\t\tu.set('pathname', '');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tu.set('host', ENUM_FAKE.hostname);\n\n\t\t\t\t\t\t\t_hidden_.hostname = u.hostname;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (u.protocol === '')\n\t\t\t\t\t{\n\t\t\t\t\t\tu.set('protocol', ENUM_FAKE.protocol);\n\t\t\t\t\t\t_hidden_.protocol = u.protocol;\n\t\t\t\t\t}\n\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tif (u.pathname !== '' && !u.pathname.startsWith('/'))\n\t\t\t\t\t{\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tu.set('pathname', '/' + u.pathname);\n\t\t\t\t\t}\n\n\t\t\t\t\t_url = _newURL(url, u.toString());\n\n\t\t\t\t\tok = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if ((url == null || url === '') && base == null)\n\t\t\t{\n\n\t\t\t}\n\t\t\telse if (url != null && base == null)\n\t\t\t{\n\t\t\t\tbase = `${ENUM_FAKE.protocol}//${ENUM_FAKE.hostname}`;\n\n\t\t\t\t_url = _newURL(url, base);\n\n\t\t\t\t_hidden_.protocol = ENUM_FAKE.protocol;\n\t\t\t\t_hidden_.hostname = ENUM_FAKE.hostname;\n\n\t\t\t\tok = true;\n\t\t\t}\n\t\t}\n\n\t\tif (!ok)\n\t\t{\n\t\t\tthrow e\n\t\t}\n\t}\n\n\treturn {\n\t\turl: _url,\n\t\thidden: _hidden_,\n\t}\n}\n\nexport interface IURLErrorNode extends Error\n{\n\tcode: 'ERR_INVALID_URL' | string,\n\tinput: IURLLike,\n}\n\nexport interface IURLError extends IURLErrorNode\n{\n\tbaseURL: IURLLike,\n}\n\nfunction _wrapError<T extends Error>(e: T, input: IURLLike | [IURLLike, IURLLike?], baseURL?: IURLLike, errInvalidUrl?: boolean): T & IURLError\n{\n\ttypePredicates<IURLError>(e);\n\n\tlet message = e.message;\n\n\tif (message === 'Invalid URL' || e.code === 'ERR_INVALID_URL' || errInvalidUrl)\n\t{\n\t\tmessage = messageWithSubErrors(e, [\n\t\t\te,\n\t\t\t{\n\t\t\t\tinput,\n\t\t\t\tbaseURL,\n\t\t\t},\n\t\t])\n\n\t\tlet meta = errStackMeta(e);\n\n\t\te.stack = errorsToMessageList([\n\t\t\te,\n\t\t\t{\n\t\t\t\tinput,\n\t\t\t\tbaseURL,\n\t\t\t},\n\t\t], {}, e).concat([meta.stack]).join('\\n');\n\n\t}\n\n\tif (e.message !== message)\n\t{\n\t\te.message = message;\n\t}\n\n\tlet err = errcode(e, e.code ?? 'ERR_INVALID_URL', {\n\t\tinput,\n\t\tbaseURL,\n\t});\n\n\treturn err as any\n}\n\nfunction _newURL(input: string | URL, baseURL?: string | URL)\n{\n\ttry\n\t{\n\t\treturn new URL(input, baseURL)\n\t}\n\tcatch (e: unknown)\n\t{\n\t\tthrow _wrapError(e as IURLError, input, baseURL);\n\t}\n}\n\nexport function isFakeProtocol(protocol: string): protocol is ENUM_FAKE.protocol\n{\n\treturn protocol === ENUM_FAKE.protocol\n}\n\nexport function isFakeHostname(hostname: string): hostname is ENUM_FAKE.protocol\n{\n\treturn hostname === ENUM_FAKE.hostname\n}\n\nexport default LazyURL\n"],"names":["SYM_URL","Symbol","SYM_HIDDEN","ENUM_FAKE","SymbolContext","findSymbolContext","LazyURL","URL","create","url","base","constructor","u","_core","href","hidden","paths","Array","isArray","path","slice","pathname","split","filter","v","fakeExists","fakeKeys","length","Object","keys","fakeEntries","entries","toRealString","options","ks","urlParse","forEach","name","value","set","host","ignoreInvalid","username","password","port","protocol","_wrapError","TypeError","s","toString","stringify","replace","hostname","isFakeHostname","isFakeProtocol","origin","_value","old","trim","parseInt","Number","isNaN","isFinite","RangeError","endsWith","_fixReplaceURLProtocol","auth","_this$username","_this$password","ls","shift","join","scheme","fragment","hash","query","search","toObject","reduce","a","b","URLSearchParams","searchParams","values","map","createURLSearchParams","init","part","get","_newURL","getOwnPropertySymbols","sym","_base","baseURI","inspect","_url","_hidden_","e","ok","typePredicates","code","test","message","includes","toLowerCase","startsWith","input","baseURL","errInvalidUrl","_e$code","messageWithSubErrors","meta","errStackMeta","stack","errorsToMessageList","concat","err","errcode"],"mappings":"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"}