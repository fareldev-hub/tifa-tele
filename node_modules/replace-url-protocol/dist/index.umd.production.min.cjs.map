{"version":3,"file":"index.umd.production.min.cjs","sources":["../src/index.ts"],"sourcesContent":["import { notStrictEqual, strictEqual } from 'assert';\n\nexport function replaceProtocol(href: string, protocol: string)\n{\n\treturn href.replace(/^[^:]+:/, protocol)\n}\n\n/**\n * @internal\n */\nexport function _fixReplaceURLProtocol<T extends URL, P extends string = string>(url: T, oldProtocol: string, newProtocol: P): asserts url is T & {\n\tprotocol: P,\n}\n{\n\tif (_isSameProtocol(url.protocol, oldProtocol))\n\t{\n\t\turl.href = replaceProtocol(url.href, newProtocol);\n\t\tassertProtocolNotEqual(url.protocol, oldProtocol);\n\t}\n}\n\n/**\n * @internal\n */\nexport function _isSameProtocol<T extends string>(actualProtocol: string, expectedProtocol: T): actualProtocol is T\n{\n\treturn actualProtocol === expectedProtocol\n}\n\nexport function assertProtocolNotEqual(actualProtocol: string, expectedProtocol: string)\n{\n\tnotStrictEqual(actualProtocol, expectedProtocol);\n}\n\nexport function assertProtocolEqual<T extends string>(actualProtocol: string, expectedProtocol: T): asserts actualProtocol is T\n{\n\tstrictEqual(actualProtocol, expectedProtocol);\n}\n\nexport function replaceThisProtocol<T extends URL>(this: T, protocol: string)\n{\n\treturn replaceURLProtocol(this, protocol);\n}\n\n/**\n * helper for avoid node.js can't update protocol for some url\n *\n * @see https://github.com/nodejs/node/issues/39732\n */\nexport function replaceURLProtocol<T extends URL, P extends string = string>(url: T, protocol: P)\n{\n\tconst old = url.protocol;\n\n\tif (!_isSameProtocol(old, protocol))\n\t{\n\t\turl.protocol = protocol\n\t\t_fixReplaceURLProtocol(url, old, protocol);\n\t}\n\n\treturn url;\n}\n\nexport default replaceURLProtocol\n"],"names":["_isSameProtocol","url","protocol","oldProtocol","actualProtocol","expectedProtocol","notStrictEqual","replaceURLProtocol","old","assertProtocolEqual","strictEqual"],"mappings":";;;;;;AAAA;;IAUAA,gBAAAC,EAAAC,UAAAC;;EAmBA,SAAAH,gBAAAI,GAAAC;IAZE,OAAAD,MAAAC;AAeF;;IAICC,iBAAAF,GAAAC;AACD;EAsBC,SAAWE,mBAAAN,GAAAC;IAGZ,MAAAM,IAAAP,EAAAC;qCAHCD,EAAAC,WAAAA;;;;0BAlBA,SAAAO,uBAAgCJ;IAChCK,cAAAN,GAAAC;AALD;;;AAWG;;;"}